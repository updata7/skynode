(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e82e8af","chunk-2d0d0ba5","chunk-2d237873"],{"0ae1":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-button",{attrs:{type:"primary"},on:{click:e.handleAddRole}},[e._v(" "+e._s(e.$t("permission.addMenu"))+" ")]),n("el-table",{staticStyle:{width:"100%","margin-top":"30px"},attrs:{data:e.menusList,"tree-props":{children:"children",hasChildren:"hasChildren"},"default-expand-all":!1,"row-key":"id","highlight-current-row":"",border:""}},[n("el-table-column",{attrs:{align:"center",label:e.$t("table.menuName"),width:"220"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.meta.icon&&t.row.meta.icon.indexOf("el-")>-1?n("i",{class:t.row.meta.icon}):t.row.meta.icon?n("svg-icon",{attrs:{"icon-class":t.row.meta.icon}}):e._e(),e._v(" "+e._s(t.row.meta.title)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:e.$t("table.menuType")},scopedSlots:e._u([{key:"default",fn:function(t){return["DIR"===t.row.type?n("el-tag",{attrs:{type:"warning"}},[e._v("目录")]):e._e(),"MENU"===t.row.type?n("el-tag",{attrs:{type:"success"}},[e._v("菜单")]):e._e(),"LINK"===t.row.type?n("el-tag",{attrs:{type:"info"}},[e._v("外链")]):e._e()]}}])}),n("el-table-column",{attrs:{align:"center",label:e.$t("table.apiPermissions")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.apiPermissions)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",label:e.$t("table.status")},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.hidden?n("el-tag",{attrs:{type:"info"}},[e._v("隐藏")]):n("el-tag",{attrs:{type:"success"}},[e._v("显示")])]}}])}),n("el-table-column",{attrs:{align:"center",label:e.$t("table.order")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.sort)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",width:"160",label:e.$t("table.createTime")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.createTime)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",width:"160",label:e.$t("table.updateTime")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(" "+e._s(t.row.updateTime)+" ")]}}])}),n("el-table-column",{attrs:{align:"center",width:"280",label:"Operations"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(n){return e.handleEdit(t)}}},[e._v(" "+e._s(e.$t("table.edit"))+" ")]),n("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(n){return e.handleDelete(t)}}},[e._v(" "+e._s(e.$t("table.delete"))+" ")]),n("el-button",{attrs:{type:"success",size:"small"},on:{click:function(n){return e.handleAddChild(t)}}},[e._v(" "+e._s(e.$t("table.addChild"))+" ")])]}}])})],1),n("el-dialog",{attrs:{visible:e.dialogVisible,title:"edit"===e.dialogType?"编辑菜单":"新建菜单"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"ruleForm",attrs:{model:e.menu,"label-width":"80px",rules:e.rules,"label-position":"left"}},[n("el-form-item",{attrs:{label:e.$t("table.parentMenu"),prop:"parentId"}},[n("el-tree-select",{ref:"treeSelect",staticStyle:{width:"95%"},attrs:{placeholder:"选择上级菜单","tree-params":e.treeParams,"select-params":e.selectParams},on:{searchFun:e.treeSearch},model:{value:e.menu.parentId,callback:function(t){e.$set(e.menu,"parentId",t)},expression:"menu.parentId"}})],1),n("el-form-item",{attrs:{label:e.$t("table.menuName"),prop:"meta.title"}},[n("el-input",{attrs:{placeholder:"菜单名"},model:{value:e.menu.meta.title,callback:function(t){e.$set(e.menu.meta,"title",t)},expression:"menu.meta.title"}})],1),n("el-form-item",{attrs:{label:"图标",prop:"icon"}},[n("el-popover",{attrs:{placement:"bottom-start",width:"570",trigger:"click"},model:{value:e.showIconSelect,callback:function(t){e.showIconSelect=t},expression:"showIconSelect"}},[n("div",{staticClass:"icon-tabs"},[n("el-tabs",{attrs:{type:"border-card"}},[n("el-tab-pane",{attrs:{label:"Icons"}},[n("div",{staticClass:"grid"},e._l(e.svgIcons,(function(t){return n("div",{key:t,on:{click:function(n){e.handleSelected(e.generateIconCode(t),n)}}},[n("el-tooltip",{attrs:{placement:"top"}},[n("div",{staticClass:"icon-item"},[n("svg-icon",{attrs:{"icon-class":t,"class-name":"disabled"}}),n("span",[e._v(e._s(t))])],1)])],1)})),0)]),n("el-tab-pane",{attrs:{label:"Element-UI Icons"}},[n("div",{staticClass:"grid"},e._l(e.elementIcons,(function(t){return n("div",{key:t,on:{click:function(n){e.handleSelected(e.generateElementIconCode(t),n)}}},[n("el-tooltip",{attrs:{placement:"top"}},[n("div",{staticClass:"icon-item"},[n("i",{class:"el-icon-"+t}),n("span",[e._v(e._s(t))])])])],1)})),0)])],1)],1),n("el-input",{attrs:{slot:"reference",placeholder:"点击选择图标",readonly:""},on:{click:function(t){e.showIconSelect=!e.showIconSelect}},slot:"reference",scopedSlots:e._u([{key:"prefix",fn:function(){return[e.menu.meta.icon&&e.menu.meta.icon.indexOf("el-")>-1?n("div",[n("i",{class:e.menu.meta.icon})]):n("div",[n("svg-icon",{attrs:{"icon-class":e.menu.meta.icon}})],1)]},proxy:!0}]),model:{value:e.menu.meta.icon,callback:function(t){e.$set(e.menu.meta,"icon",t)},expression:"menu.meta.icon"}})],1)],1),n("el-form-item",{attrs:{label:"菜单类型",prop:"type"}},[n("el-radio-group",{model:{value:e.menu.type,callback:function(t){e.$set(e.menu,"type",t)},expression:"menu.type"}},[n("el-radio",{attrs:{label:"DIR"}},[e._v("目录")]),n("el-radio",{attrs:{label:"MENU"}},[e._v("菜单")]),n("el-radio",{attrs:{label:"LINK"}},[e._v("外链")])],1)],1),"LINK"==e.menu.type?n("el-form-item",{attrs:{label:"外链地址",prop:"path"}},[n("el-input",{attrs:{placeholder:"请输入外链完整路径"},model:{value:e.menu.path,callback:function(t){e.$set(e.menu,"path",t)},expression:"menu.path"}})],1):e._e(),"LINK"!=e.menu.type?n("el-form-item",{attrs:{label:"路由路径",prop:"path"}},["DIR"==e.menu.type?n("el-input",{attrs:{placeholder:"/system  (目录以/开头)"},model:{value:e.menu.path,callback:function(t){e.$set(e.menu,"path",t)},expression:"menu.path"}}):"MENU"==e.menu.type&&"0"===e.menu.parentId?n("el-input",{attrs:{placeholder:"/user (顶级菜单以/开头)"},model:{value:e.menu.path,callback:function(t){e.$set(e.menu,"path",t)},expression:"menu.path"}}):n("el-input",{attrs:{placeholder:"user"},model:{value:e.menu.path,callback:function(t){e.$set(e.menu,"path",t)},expression:"menu.path"}})],1):e._e(),"MENU"==e.menu.type?n("el-form-item",{attrs:{label:"页面路径",prop:"component"}},[n("el-input",{staticStyle:{width:"95%"},attrs:{placeholder:"system/user/index"},scopedSlots:e._u([{key:"prepend",fn:function(){return[e._v("@/views/")]},proxy:!0},{key:"append",fn:function(){return[e._v(".vue")]},proxy:!0}],null,!1,305706217),model:{value:e.menu.component,callback:function(t){e.$set(e.menu,"component",t)},expression:"menu.component"}})],1):e._e(),n("el-form-item",{attrs:{label:"权限标识",prop:"permissions"}},[n("el-cascader",{staticStyle:{width:"100%"},attrs:{options:e.permissions,props:e.props,filterable:"","collapse-tags":"",clearable:""},model:{value:e.menu.permissions,callback:function(t){e.$set(e.menu,"permissions",t)},expression:"menu.permissions"}})],1),n("el-form-item",{attrs:{label:"状态"}},[n("el-switch",{attrs:{"active-text":"隐藏","inactive-text":"显示"},model:{value:e.menu.hidden,callback:function(t){e.$set(e.menu,"hidden",t)},expression:"menu.hidden"}})],1),n("el-form-item",{attrs:{label:"排序",prop:"sort"}},[n("el-input-number",{staticStyle:{width:"100px"},attrs:{"controls-position":"right",min:0},model:{value:e.menu.sort,callback:function(t){e.$set(e.menu,"sort",t)},expression:"menu.sort"}})],1)],1),n("div",{staticStyle:{"text-align":"right"}},[n("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogVisible=!1}}},[e._v(" "+e._s(e.$t("permission.cancel"))+" ")]),n("el-button",{attrs:{type:"primary"},on:{click:e.confirmRole}},[e._v(" "+e._s(e.$t("permission.confirm"))+" ")])],1)],1)],1)},r=[],o=n("c7eb"),s=n("1da1"),i=n("ed08"),l=n("fc00"),c=n("68e2"),u=n("1f27"),d=n("b775");function p(e){return Object(d["a"])({url:"/permission/list",method:"get",params:e})}var m=n("9923"),f={path:"",type:"DIR",sort:1,parentId:"0",hidden:!1,component:"",meta:{title:"",icon:"",affix:!0},permissions:[]},b={data:function(){return{props:{multiple:!0},selectParams:{multiple:!1,clearable:!0,placeholder:"请输入内容"},treeParams:{filterable:!0,"check-strictly":!0,"default-expand-all":!0,"expand-on-click-node":!1,data:[{id:"0",title:"顶级菜单",children:[]}],props:{label:"title",value:"id"}},showIconSelect:!1,svgIcons:l["default"],elementIcons:c["default"],iconSelectVisible:!1,menu:Object.assign({},f),routes:[],menusList:[],dialogVisible:!1,dialogType:"new",checkStrictly:!1,rules:{parentId:[{required:!0,message:"请选择顶级菜单",trigger:"blur"}],"meta.title":[{required:!0,message:"请输入菜单名称",trigger:"blur"}],type:[{required:!0,message:"请选择菜单类型",trigger:"blur"}],path:[{required:!0,message:"请输入路由路径",trigger:"blur"}],component:[{required:!0,message:"请输入组件完整路径",trigger:"blur"}]},initOptionsMenu:!1,permissions:[]}},computed:{},created:function(){this.getMenus()},methods:{getPermission:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){var n,a;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.permissions.length>0)){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,p();case 4:n=t.sent,a=n.data.data,e.permissions=a;case 7:case"end":return t.stop()}}),t)})))()},optionsMenu:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){var n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.getPermission(),!e.initOptionsMenu){t.next=3;break}return t.abrupt("return");case 3:return e.initOptionsMenu=!0,t.next=6,Object(u["d"])({});case 6:n=t.sent,console.debug("optionsMenu ==> ",n),e.treeParams.data[0].children=n.data.records,console.debug("optionsMenu ==> ",e.treeParams.data);case 10:case"end":return t.stop()}}),t)})))()},generateIconCode:function(e){return"".concat(e)},generateElementIconCode:function(e){return"el-icon-".concat(e)},handleSelected:function(e,t){this.menu.meta.icon=e,this.showIconSelect=!1},treeSearch:function(e){this.$refs.treeSelect.filterFun(e)},getMenus:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){var n;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["c"])();case 2:n=t.sent,console.debug("getMenus ==> ",n),e.menusList=n.data.records;case 5:case"end":return t.stop()}}),t)})))()},handleAddRole:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.menu=Object(i["d"])(Object.assign({},f)),t.next=3,e.optionsMenu();case 3:e.dialogType="new",e.dialogVisible=!0;case 5:case"end":return t.stop()}}),t)})))()},handleEdit:function(e){var t=this;return Object(s["a"])(Object(o["a"])().mark((function n(){return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.optionsMenu();case 2:t.dialogType="edit",t.dialogVisible=!0,t.menu=Object(i["d"])(e.row);case 5:case"end":return n.stop()}}),n)})))()},handleAddChild:function(e){var t=this;return Object(s["a"])(Object(o["a"])().mark((function n(){return Object(o["a"])().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.optionsMenu();case 2:t.dialogType="new",t.dialogVisible=!0,t.menu=Object(i["d"])(f),t.menu.parentId=e.row.id;case 6:case"end":return n.stop()}}),n)})))()},handleDelete:function(e){var t=this,n=(e.$index,e.row);this.$confirm(m["a"].t("permission.deleteMenuConfirm"),m["a"].t("permission.warning"),{confirmButtonText:m["a"].t("permission.confirm"),cancelButtonText:m["a"].t("permission.cancel"),type:"warning"}).then(Object(s["a"])(Object(o["a"])().mark((function e(){return Object(o["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(u["b"])({ids:[n.id]});case 2:t.getMenus(),t.$message({type:"success",message:"Delete succed!"});case 4:case"end":return e.stop()}}),e)})))).catch((function(e){console.error(e)}))},confirmRole:function(){var e=this;return Object(s["a"])(Object(o["a"])().mark((function t(){return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs["ruleForm"].validate(function(){var t=Object(s["a"])(Object(o["a"])().mark((function t(n){var a,r;return Object(o["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n){t.next=3;break}return console.debug("confirmRole ==> bad params"),t.abrupt("return");case 3:if("DIR"===e.menu.type&&(e.menu.alwaysShow=!0,e.menu.component="Layout"),a="edit"===e.dialogType,!a){t.next=14;break}return delete e.menu.createTime,delete e.menu.updateTime,delete e.menu.children,console.debug("editMenu ===> ",e.menu),t.next=12,Object(u["e"])(e.menu);case 12:t.next=19;break;case 14:return console.debug("addMenu ===> ",e.menu),t.next=17,Object(u["a"])(e.menu);case 17:r=t.sent,r.data;case 19:e.getMenus(),e.dialogVisible=!1,e.$notify({title:"Success",dangerouslyUseHTMLString:!0,message:"success",type:"success"});case 22:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()}}},h=b,g=(n("3945"),n("0c7c")),w=Object(g["a"])(h,a,r,!1,null,"c9b3a38e",null);t["default"]=w.exports},"1f27":function(e,t,n){"use strict";n.d(t,"c",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return i})),n.d(t,"b",(function(){return l}));var a=n("b775");function r(e){return Object(a["a"])({url:"/menu/search",method:"get",data:e})}function o(e){return Object(a["a"])({url:"/menu/add",method:"post",data:e})}function s(e){return Object(a["a"])({url:"/menu/options",method:"post",data:e})}function i(e){return Object(a["a"])({url:"/menu/update",method:"post",data:e})}function l(e){return Object(a["a"])({url:"/menu/delete",method:"put",data:e})}},"229d":function(e,t,n){},3945:function(e,t,n){"use strict";n("229d")},"68e2":function(e,t,n){"use strict";n.r(t);var a=["platform-eleme","eleme","delete-solid","delete","s-tools","setting","user-solid","user","phone","phone-outline","more","more-outline","star-on","star-off","s-goods","goods","warning","warning-outline","question","info","remove","circle-plus","success","error","zoom-in","zoom-out","remove-outline","circle-plus-outline","circle-check","circle-close","s-help","help","minus","plus","check","close","picture","picture-outline","picture-outline-round","upload","upload2","download","camera-solid","camera","video-camera-solid","video-camera","message-solid","bell","s-cooperation","s-order","s-platform","s-fold","s-unfold","s-operation","s-promotion","s-home","s-release","s-ticket","s-management","s-open","s-shop","s-marketing","s-flag","s-comment","s-finance","s-claim","s-custom","s-opportunity","s-data","s-check","s-grid","menu","share","d-caret","caret-left","caret-right","caret-bottom","caret-top","bottom-left","bottom-right","back","right","bottom","top","top-left","top-right","arrow-left","arrow-right","arrow-down","arrow-up","d-arrow-left","d-arrow-right","video-pause","video-play","refresh","refresh-right","refresh-left","finished","sort","sort-up","sort-down","rank","loading","view","c-scale-to-original","date","edit","edit-outline","folder","folder-opened","folder-add","folder-remove","folder-delete","folder-checked","tickets","document-remove","document-delete","document-copy","document-checked","document","document-add","printer","paperclip","takeaway-box","search","monitor","attract","mobile","scissors","umbrella","headset","brush","mouse","coordinate","magic-stick","reading","data-line","data-board","pie-chart","data-analysis","collection-tag","film","suitcase","suitcase-1","receiving","collection","files","notebook-1","notebook-2","toilet-paper","office-building","school","table-lamp","house","no-smoking","smoking","shopping-cart-full","shopping-cart-1","shopping-cart-2","shopping-bag-1","shopping-bag-2","sold-out","sell","present","box","bank-card","money","coin","wallet","discount","price-tag","news","guide","male","female","thumb","cpu","link","connection","open","turn-off","set-up","chat-round","chat-line-round","chat-square","chat-dot-round","chat-dot-square","chat-line-square","message","postcard","position","turn-off-microphone","microphone","close-notification","bangzhu","time","odometer","crop","aim","switch-button","full-screen","copy-document","mic","stopwatch","medal-1","medal","trophy","trophy-1","first-aid-kit","discover","place","location","location-outline","location-information","add-location","delete-location","map-location","alarm-clock","timer","watch-1","watch","lock","unlock","key","service","mobile-phone","bicycle","truck","ship","basketball","football","soccer","baseball","wind-power","light-rain","lightning","heavy-rain","sunrise","sunrise-1","sunset","sunny","cloudy","partly-cloudy","cloudy-and-sunny","moon","moon-night","dish","dish-1","food","chicken","fork-spoon","knife-fork","burger","tableware","sugar","dessert","ice-cream","hot-water","water-cup","coffee-cup","cold-drink","goblet","goblet-full","goblet-square","goblet-square-full","refrigerator","grape","watermelon","cherry","apple","pear","orange","coffee","ice-tea","ice-drink","milk-tea","potato-strips","lollipop","ice-cream-square","ice-cream-round"];t["default"]=a},fc00:function(e,t,n){"use strict";n.r(t);n("d3b7"),n("ddb0"),n("d81d"),n("ac1f"),n("466d");var a=n("51ff"),r=function(e){return e.keys()},o=/\.\/(.*)\.svg/,s=r(a).map((function(e){return e.match(o)[1]}));t["default"]=s}}]);