(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-9344814e"],{"365c":function(t,e,r){"use strict";r.d(e,"b",(function(){return o})),r.d(e,"a",(function(){return a}));var o="http://120.24.170.189:9011/api/multiMedia/upload",i="http://120.24.170.189:9011";function a(t){return i+"/"+t}},"43fe":function(t,e,r){
/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
var o=r("aa11"),i=o.Buffer;function a(t,e){for(var r in t)e[r]=t[r]}function n(t,e,r){return i(t,e,r)}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=o:(a(o,e),e.Buffer=n),n.prototype=Object.create(i.prototype),a(i,n),n.from=function(t,e,r){if("number"===typeof t)throw new TypeError("Argument must not be a number");return i(t,e,r)},n.alloc=function(t,e,r){if("number"!==typeof t)throw new TypeError("Argument must be a number");var o=i(t);return void 0!==e?"string"===typeof r?o.fill(e,r):o.fill(e):o.fill(0),o},n.allocUnsafe=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return i(t)},n.allocUnsafeSlow=function(t){if("number"!==typeof t)throw new TypeError("Argument must be a number");return o.SlowBuffer(t)}},"4e82":function(t,e,r){"use strict";var o=r("23e7"),i=r("1c0b"),a=r("7b0b"),n=r("d039"),s=r("a640"),l=[],c=l.sort,u=n((function(){l.sort(void 0)})),f=n((function(){l.sort(null)})),d=s("sort"),p=u||!f||!d;o({target:"Array",proto:!0,forced:p},{sort:function(t){return void 0===t?c.call(a(this)):c.call(a(this),i(t))}})},"58b9":function(t,e,r){"use strict";var o=r("43fe").Buffer,i=o.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(t){if(!t)return"utf8";var e;while(1)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function n(t){var e=a(t);if("string"!==typeof e&&(o.isEncoding===i||!i(t)))throw new Error("Unknown encoding: "+t);return e||t}function s(t){var e;switch(this.encoding=n(t),this.encoding){case"utf16le":this.text=m,this.end=h,e=4;break;case"utf8":this.fillLast=f,e=4;break;case"base64":this.text=g,this.end=b,e=3;break;default:return this.write=v,void(this.end=_)}this.lastNeed=0,this.lastTotal=0,this.lastChar=o.allocUnsafe(e)}function l(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function c(t,e,r){var o=e.length-1;if(o<r)return 0;var i=l(e[o]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--o<r||-2===i?0:(i=l(e[o]),i>=0?(i>0&&(t.lastNeed=i-2),i):--o<r||-2===i?0:(i=l(e[o]),i>=0?(i>0&&(2===i?i=0:t.lastNeed=i-3),i):0))}function u(t,e,r){if(128!==(192&e[0]))return t.lastNeed=0,"�";if(t.lastNeed>1&&e.length>1){if(128!==(192&e[1]))return t.lastNeed=1,"�";if(t.lastNeed>2&&e.length>2&&128!==(192&e[2]))return t.lastNeed=2,"�"}}function f(t){var e=this.lastTotal-this.lastNeed,r=u(this,t,e);return void 0!==r?r:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function d(t,e){var r=c(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var o=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,o),t.toString("utf8",e,o)}function p(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"�":e}function m(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var o=r.charCodeAt(r.length-1);if(o>=55296&&o<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function h(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function g(t,e){var r=(t.length-e)%3;return 0===r?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,1===r?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function b(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function v(t){return t.toString(this.encoding)}function _(t){return t&&t.length?this.write(t):""}e.StringDecoder=s,s.prototype.write=function(t){if(0===t.length)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),void 0===e)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""},s.prototype.end=p,s.prototype.text=d,s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},6236:function(t,e,r){"use strict";r("a5d3")},8263:function(t,e,r){"use strict";r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return a})),r.d(e,"d",(function(){return n})),r.d(e,"b",(function(){return s}));var o=r("b775");function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])({url:"/goodsCategory/list",method:"get",params:t})}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])({url:"/goodsCategory/create",method:"post",data:t})}function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])({url:"/goodsCategory/update",method:"post",data:t})}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])({url:"/goodsCategory/delete",method:"put",data:t})}},"86ce":function(t,e,r){"use strict";var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("el-upload",{attrs:{"list-type":"picture-card",action:t.uploadUrl,"show-file-list":t.showFileList,"on-success":t.handleAvatarSuccess,"before-upload":t.beforeAvatarUpload,"before-remove":t.beforeRemove,"on-exceed":t.onExceed,multiple:t.multiple,headers:t.headers,fileType:t.fileType,name:"files",limit:t.limit}},[r("i",{staticClass:"el-icon-plus"})])},i=[],a=r("2909"),n=r("53ca"),s=(r("a9e3"),r("b0c0"),r("a434"),r("365c")),l=r("5f87"),c=(r("58b9"),{name:"UploadFile",props:{fpaths:{type:[String,Array]},multiple:{type:Boolean,default:!1},showFileList:{type:Boolean,default:!1},limit:{type:Number,default:1},fileType:{type:String,default:"image"}},data:function(){return{uploadUrl:s["b"],headers:{"access-token":Object(l["a"])()},tmpPaths:[]}},methods:{handleAvatarSuccess:function(t,e){var r;(console.log("handleAvatarSuccess ===> ",Object(n["a"])(this.tmpPaths),this.tmpPaths,t),this.multiple)?(r=this.tmpPaths).push.apply(r,Object(a["a"])(t.paths)):this.tmpPaths=t.paths[0];console.log("handleAvatarSuccess 22 ===>>",this.tmpPaths),this.$emit("update:fpaths",this.tmpPaths)},beforeRemove:function(t,e){console.log("beforeRemove ===> ",t,e);var r=t.response?t.response.paths[0]:t.name;if("object"===Object(n["a"])(this.value)){var o=this.value.indexOf(r);this.tmpPaths.splice(o,1)}else this.tmpPaths=null;this.$emit("update:fpaths",this.tmpPaths)},beforeAvatarUpload:function(t){if(console.log("beforeAvatarUpload fileType ==> ",t.type),"image"===this.fileType){var e="image/jpeg"===t.type||"image/png"===t.type,r=t.size/1024/1024<2;return e||this.$message.error("上传头像图片只能是 JPG/JPEG/PNG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),e&&r}},onExceed:function(){this.$message.error("最多只能传".concat(this.limit,"张图片"))}}}),u=c,f=r("0c7c"),d=Object(f["a"])(u,o,i,!1,null,"a2bac3ba",null);e["a"]=d.exports},a5d3:function(t,e,r){},abd4:function(t,e,r){"use strict";r.d(e,"a",(function(){return i})),r.d(e,"b",(function(){return a})),r.d(e,"c",(function(){return n}));var o=r("b775");function i(t){return Object(o["a"])({url:"/goodsProduct/check",method:"post",data:t})}function a(t){return Object(o["a"])({url:"/goodsProduct/delete",method:"put",data:t})}function n(t){return Object(o["a"])({url:"/goodsProduct/update",method:"post",data:t})}},c07b:function(t,e,r){"use strict";r.r(e);var o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-table-box"},[r("el-form",{ref:"infoForm",attrs:{rules:t.infoRules,model:t.infoForm,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"商品分类"}},[r("el-select",{staticClass:"el-select-class",attrs:{placeholder:"选择商品分类"},model:{value:t.infoForm.category_id,callback:function(e){t.$set(t.infoForm,"category_id",e)},expression:"infoForm.category_id"}},t._l(t.cateOptions,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),t.infoForm.pic_url?r("el-form-item",{staticClass:"image-uploader-diy new-height",attrs:{label:"商品首图",prop:"pic_url"}},[r("div",{staticClass:"index-image"},[t.infoForm.pic_url?r("el-image",{staticClass:"image-show",attrs:{"preview-src-list":t.previewList,src:t.getCompleteUrl(t.infoForm.pic_url),fit:"cover"},on:{click:function(e){return t.previewImg()}}}):t._e(),r("div",{staticClass:"o-shadow",on:{click:t.delePicList}},[r("i",{staticClass:"el-icon-delete"})])],1)]):t._e(),t.infoForm.pic_url?t._e():r("el-form-item",{attrs:{label:"商品首图",prop:"pic_url"}},[r("UploadFile",{attrs:{multiple:!1,showFileList:!1,fpaths:t.infoForm.pic_url},on:{"update:fpaths":function(e){return t.$set(t.infoForm,"pic_url",e)}}})],1),r("el-form-item",{attrs:{label:"商品轮播或视频"}},[r("el-switch",{attrs:{"active-text":"商品轮播图","inactive-text":"商品视频","active-value":"1","inactive-value":"2"},model:{value:t.infoForm.show_pic_or_video,callback:function(e){t.$set(t.infoForm,"show_pic_or_video",e)},expression:"infoForm.show_pic_or_video"}})],1),1==t.infoForm.show_pic_or_video?r("el-form-item",{attrs:{label:"商品轮播图",prop:"list_pic_url"}},[r("draggable",{staticClass:"drag-wrap",attrs:{draggable:".gallery-item"},model:{value:t.infoForm.list_pic_url,callback:function(e){t.$set(t.infoForm,"list_pic_url",e)},expression:"infoForm.list_pic_url"}},[t._l(t.infoForm.list_pic_url,(function(e,o){return r("div",{staticClass:"gallery-item"},[r("el-image",{staticStyle:{width:"148px",height:"148px",margin:"0 10px 10px 0"},attrs:{"preview-src-list":t.previewList,src:t.getCompleteUrl(e),fit:"cover"},on:{click:function(e){return t.previewIndexImg(o)}}}),r("div",{staticClass:"shadow",on:{click:function(e){return t.onRemoveHandler(o)}}},[r("i",{staticClass:"el-icon-delete"})])],1)})),r("UploadFile",{attrs:{multiple:!0,showFileList:!1,limit:10,fpaths:t.infoForm.list_pic_url},on:{"update:fpaths":function(e){return t.$set(t.infoForm,"list_pic_url",e)}}})],2)],1):t._e(),2==t.infoForm.show_pic_or_video?r("el-form-item",{attrs:{label:"商品视频",prop:"video_url"}},[t.infoForm.video_url?r("video",{staticClass:"video-wrap",attrs:{src:t.getCompleteUrl(t.infoForm.video_url),controls:"controls"}},[t._v("您的浏览器不支持视频播放")]):t._e(),t.infoForm.video_url?t._e():r("UploadFile",{attrs:{fileType:"video",fpaths:t.infoForm.video_url},on:{"update:fpaths":function(e){return t.$set(t.infoForm,"video_url",e)}}})],1):t._e(),r("el-form-item",{attrs:{label:"商品名称",prop:"name"}},[r("el-input",{model:{value:t.infoForm.name,callback:function(e){t.$set(t.infoForm,"name",e)},expression:"infoForm.name"}})],1),r("el-form-item",{attrs:{label:"商品简介",prop:"brief"}},[r("el-input",{attrs:{type:"textarea",rows:3},model:{value:t.infoForm.brief,callback:function(e){t.$set(t.infoForm,"brief",e)},expression:"infoForm.brief"}}),r("div",{staticClass:"form-tip"})],1),r("el-form-item",{attrs:{label:"商品单位",prop:"unit"}},[r("el-input",{model:{value:t.infoForm.unit,callback:function(e){t.$set(t.infoForm,"unit",e)},expression:"infoForm.unit"}}),r("div",{staticClass:"form-tip"},[t._v("如：件、包、袋")])],1),r("el-form-item",{attrs:{label:"销量",prop:"sales"}},[r("el-input",{model:{value:t.infoForm.sales,callback:function(e){t.$set(t.infoForm,"sales",t._n(e))},expression:"infoForm.sales"}})],1),r("el-form-item",{attrs:{label:"型号和价格",prop:"spec_id"}},[r("div",[r("el-select",{staticClass:"el-select-class",attrs:{placeholder:"选择型号分类"},model:{value:t.infoForm.spec_id,callback:function(e){t.$set(t.infoForm,"spec_id",e)},expression:"infoForm.spec_id"}},t._l(t.specificationList,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),r("div",{staticClass:"spec-wrap"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.infoForm.products,stripe:""}},[r("el-table-column",{attrs:{prop:"sku",label:"商品SKU",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-input",{attrs:{size:"mini",placeholder:"商品SKU"},on:{blur:function(r){return t.checkSkuOnly(e.$index,e.row)}},model:{value:e.row.sku,callback:function(r){t.$set(e.row,"sku",r)},expression:"scope.row.sku"}})]}}])}),r("el-table-column",{attrs:{prop:"short_name",label:"快递单上的简称",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-input",{attrs:{size:"mini",placeholder:"简称"},model:{value:e.row.short_name,callback:function(r){t.$set(e.row,"short_name",r)},expression:"scope.row.short_name"}})]}}])}),r("el-table-column",{attrs:{prop:"attr",label:"型号/规格",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-input",{attrs:{size:"mini",placeholder:"如1斤/条"},model:{value:e.row.attr,callback:function(r){t.$set(e.row,"attr",r)},expression:"scope.row.attr"}})]}}])}),r("el-table-column",{attrs:{prop:"cost",label:"成本(元)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-input",{attrs:{size:"mini",placeholder:"成本"},model:{value:e.row.cost,callback:function(r){t.$set(e.row,"cost",r)},expression:"scope.row.cost"}})]}}])}),r("el-table-column",{attrs:{prop:"retail",label:"零售(元)",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-input",{attrs:{size:"mini",placeholder:"零售"},model:{value:e.row.retail,callback:function(r){t.$set(e.row,"retail",r)},expression:"scope.row.retail"}})]}}])}),r("el-table-column",{attrs:{prop:"weight",label:"重量(KG)",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-input",{attrs:{size:"mini",placeholder:"重量"},model:{value:e.row.weight,callback:function(r){t.$set(e.row,"weight",r)},expression:"scope.row.weight"}})]}}])}),r("el-table-column",{attrs:{prop:"stock",label:"库存",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-input",{attrs:{size:"mini",placeholder:"库存"},model:{value:e.row.stock,callback:function(r){t.$set(e.row,"stock",r)},expression:"scope.row.stock"}})]}}])}),r("el-table-column",{attrs:{prop:"sort",label:"排序",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-input",{attrs:{size:"mini",placeholder:"1"},model:{value:e.row.sort,callback:function(r){t.$set(e.row,"sort",r)},expression:"scope.row.sort"}})]}}])}),r("el-table-column",{attrs:{label:"操作",width:"70"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(r){return t.productDelete(e.$index,e.row)}}})]}}])})],1),r("el-button",{staticClass:"marginTop20",attrs:{type:"primary"},on:{click:t.addProduct}},[t._v("新增型号")])],1)]),r("el-form-item",{staticClass:"checkbox-wrap",attrs:{label:"属性设置"}},[r("el-radio-group",{staticClass:"radio-list",model:{value:t.infoForm.attr,callback:function(e){t.$set(t.infoForm,"attr",e)},expression:"infoForm.attr"}},[r("el-radio",{attrs:{label:0}},[t._v("普通")]),r("el-radio",{attrs:{label:1}},[t._v("新品")])],1)],1),r("el-form-item",{attrs:{label:"选择快递模板"}},[r("el-select",{attrs:{placeholder:"请选择快递"},model:{value:t.infoForm.express_template_id,callback:function(e){t.$set(t.infoForm,"express_template_id",e)},expression:"infoForm.express_template_id"}},t._l(t.kdOptions,(function(t){return r("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),r("el-form-item",{attrs:{label:"排序",prop:"sort"}},[r("el-input-number",{attrs:{mini:1,max:100},model:{value:t.infoForm.sort,callback:function(e){t.$set(t.infoForm,"sort",e)},expression:"infoForm.sort"}})],1),r("el-form-item",{attrs:{label:""}},[r("el-switch",{attrs:{"active-text":"上架","inactive-text":"下架","active-value":"0","inactive-value":"1"},model:{value:t.infoForm.on_sale,callback:function(e){t.$set(t.infoForm,"on_sale",e)},expression:"infoForm.on_sale"}})],1),r("el-form-item",{attrs:{label:"商品详情",prop:"detail"}},[r("div",{staticClass:"edit_container"},[r("tinymce",{attrs:{height:300},model:{value:t.infoForm.detail,callback:function(e){t.$set(t.infoForm,"detail",e)},expression:"infoForm.detail"}})],1)]),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:t.onSubmitInfo}},[t._v("确定保存")]),r("el-button",{on:{click:t.goBackPage}},[t._v("返回列表")]),t.infoForm.id>0?r("el-button",{staticClass:"float-right",attrs:{type:"danger"},on:{click:t.onCopyGood}},[t._v("复制商品")]):t._e()],1)],1)],1)},i=[],a=r("c7eb"),n=r("b85c"),s=r("1da1"),l=(r("a434"),r("4e82"),r("8256")),c=r("8263"),u=r("abd4"),f=r("d568"),d=r("365c"),p=r("c40e"),m=r("86ce"),h=r("b76a"),g=r.n(h),b={name:"",list_pic_url:[],brief:"",attr:1,on_sale:0,products:[],show_pic_or_video:"1",sort:1,express_template_id:"1"},v={components:{Tinymce:l["a"],UploadFile:m["a"],draggable:g.a},data:function(){var t=this,e=function(e,r,o){1!=t.infoForm.show_pic_or_video||r?o():o(new Error("轮播图至少需要一张"))},r=function(e,r,o){2!=t.infoForm.show_pic_or_video||r?o():o(new Error("视频不能为空"))};return{kdOptions:[],cateOptions:[],infoForm:b,infoRules:{name:[{required:!0,message:"请输入名称",trigger:"blur"}],brief:[{required:!0,message:"请输入简介",trigger:"blur"}],list_pic_url:[{validator:e,message:"至少需要一张轮播图",trigger:"blur"}],video_url:[{validator:r,message:"视频不能为空",trigger:"blur"}]},specificationList:[],previewList:[]}},methods:{getCompleteUrl:function(t){return Object(d["a"])(t)},onRemoveHandler:function(t){var e=this;e.$confirm("确定删除该图片?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var r=e.infoForm.list_pic_url;r.splice(t,1)})).catch((function(){}))},previewImg:function(){var t=this;t.previewList=[],t.previewList.push(this.getCompleteUrl(t.infoForm.pic_url))},previewIndexImg:function(t){var e=this;e.previewList=[];var r=e.infoForm.list_pic_url;e.previewList.push(this.getCompleteUrl(r[t]))},checkSkuOnly:function(t,e){var r=this;if(console.log("checkSkuOnly ==> ",t,e),""==e.sku)return this.$message({type:"error",message:"SKU不能为空"}),!1;Object(u["a"])({sku:e.sku}).then((function(t){t.data.success?r.$message({type:"success",message:"该SKU可以用！"}):r.$message({type:"error",message:"该SKU已存在！"})}))},addProduct:function(){var t={sku:"",short_name:"",attr:"",cost:"",retail:"",weight:"",stock:1e4,sort:1};this.infoForm.products.push(t)},productDelete:function(t,e){this.infoForm.products.splice(t,1)},delePicList:function(){var t=this;t.$confirm("确定删除该图片?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.infoForm.pic_url=""})).catch((function(){}))},goBackPage:function(){this.$router.go(-1)},onCopyGood:function(){var t=this;this.$confirm("确定复制该商品？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.axios.post("goods/copygoods",{id:t.infoForm.id}).then((function(e){0===e.data.errno&&t.$message({type:"success",message:"复制成功!"})}))}))},onSubmitInfo:function(){var t=this;this.$refs["infoForm"].validate(function(){var e=Object(s["a"])(Object(a["a"])().mark((function e(r){var o,i,s,l,c,u,f,d,m,h;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return",!1);case 2:if(""!=t.infoForm.pic_url&&null!=t.infoForm.pic_url){e.next=5;break}return t.$message({type:"error",message:"请上传商品首图！"}),e.abrupt("return",!1);case 5:if(!(1===t.infoForm.show_pic_or_video&&t.infoForm.list_pic_url.length<=0)){e.next=8;break}return t.$message({type:"error",message:"请至少上传一张轮播图！"}),e.abrupt("return",!1);case 8:if(0!=t.infoForm.products.length){e.next=11;break}return t.$message({type:"error",message:"请添加一个规格型号"}),e.abrupt("return",!1);case 11:o=Object(n["a"])(t.infoForm.products),e.prev=12,o.s();case 14:if((i=o.n()).done){e.next=21;break}if(s=i.value,""!=s.cost&&""!=s.short_name&&""!=s.attr&&""!=s.retail&&""!=s.weight&&""!=s.stock&&""!=s.sort){e.next=19;break}return t.$message({type:"error",message:"型号参数里的值不能为空"}),e.abrupt("return",!1);case 19:e.next=14;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e["catch"](12),o.e(e.t0);case 26:return e.prev=26,o.f(),e.finish(26);case 29:if(!t.infoForm.id){e.next=41;break}delete t.infoForm.createTime,delete t.infoForm.updateTime,delete t.infoForm.actual_sales,delete t.infoForm.stock,c=Object(n["a"])(t.infoForm.products);try{for(c.s();!(u=c.n()).done;)f=u.value,delete f.createTime,delete f.updateTime,delete f.__v,delete f._id,delete f.belong_user_id,delete f.goods_id}catch(a){c.e(a)}finally{c.f()}return e.next=38,Object(p["d"])(t.infoForm);case 38:l=e.sent,e.next=44;break;case 41:return e.next=43,Object(p["a"])(t.infoForm);case 43:l=e.sent;case 44:d=l.data,m=d.success,h=d.message,m?(t.$message({type:"success",message:"操作成功"}),t.$router.go(-1)):t.$message({type:"error",message:h});case 46:case"end":return e.stop()}}),e,null,[[12,23,26,29]])})));return function(t){return e.apply(this,arguments)}}())},getAllCategory:function(){var t=this;return Object(s["a"])(Object(a["a"])().mark((function e(){var r,o;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(c["c"])();case 2:r=e.sent,o=r.data.data,t.cateOptions=o;case 5:case"end":return e.stop()}}),e)})))()},getAllSpecification:function(){var t=this;return Object(s["a"])(Object(a["a"])().mark((function e(){var r,o;return Object(a["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(f["c"])();case 2:r=e.sent,o=r.data.data,console.log("getAllSpecification ==> ",o),t.specificationList=o;case 6:case"end":return e.stop()}}),e)})))()},loadData:function(){this.getAllSpecification(),this.getAllCategory()}},computed:{},mounted:function(){this.infoForm=this.$route.query.id?this.$route.query:b,this.loadData()}},_=v,w=(r("6236"),r("0c7c")),y=Object(w["a"])(_,o,i,!1,null,"1caa29ce",null);e["default"]=y.exports},c40e:function(t,e,r){"use strict";r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return a})),r.d(e,"d",(function(){return n})),r.d(e,"b",(function(){return s}));var o=r("b775");function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])({url:"/goods/list",method:"get",params:t})}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])({url:"/goods/create",method:"post",data:t})}function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])({url:"/goods/update",method:"post",data:t})}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])({url:"/goods/delete",method:"put",data:t})}},d568:function(t,e,r){"use strict";r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return a})),r.d(e,"d",(function(){return n})),r.d(e,"b",(function(){return s}));var o=r("b775");function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])({url:"/goodsSpec/list",method:"get",params:t})}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])({url:"/goodsSpec/create",method:"post",data:t})}function n(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])({url:"/goodsSpec/update",method:"post",data:t})}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(o["a"])({url:"/goodsSpec/delete",method:"put",data:t})}}}]);