(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-87c08354"],{"9c3e":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{ref:"infoForm",attrs:{rules:e.infoRules,model:e.infoForm,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"名称",prop:"content"}},[a("el-input",{attrs:{placeholder:"请输入名称",autofocus:""},model:{value:e.infoForm.content,callback:function(t){e.$set(e.infoForm,"content",t)},expression:"infoForm.content"}})],1),a("el-form-item",[a("div",{staticClass:"form-table-box"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"areaName",label:"偏远地区"}}),a("el-table-column",{attrs:{label:"操作",width:"160"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"small",type:"primary",plain:""},on:{click:function(a){return e.handleRowEdit(t.$index,t.row)}}},[e._v("编辑地区 ")])]}}])})],1)],1)]),a("el-form-item",[e.infoForm.id?a("el-button",{attrs:{type:"primary"},on:{click:e.onSaveTemplate}},[e._v("确定保存")]):a("el-button",{attrs:{type:"primary"},on:{click:e.onAddTemplate}},[e._v("确定添加")]),a("el-button",{on:{click:e.goBackPage}},[e._v("返回列表")])],1)],1),a("el-dialog",{attrs:{size:"tiny",title:"设置偏远地区",visible:e.specEditVisible},on:{"update:visible":function(t){e.specEditVisible=t}}},[a("el-form",{ref:"specForm",staticClass:"specFormDialig"},[a("el-form-item",{attrs:{label:"","label-width":"100px"}},[a("el-transfer",{attrs:{props:{key:"id",label:"name"},data:e.areaData,titles:["可选","已选"]},model:{value:e.selectedArea,callback:function(t){e.selectedArea=t},expression:"selectedArea"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.specEditVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.updateArea}},[e._v("确定")])],1)],1)],1)},r=[],o=(a("a15b"),a("d81d"),a("b0c0"),a("a9e3"),{data:function(){return{areaData:[],selectedArea:[],specEditVisible:!1,infoForm:{id:0,content:""},infoRules:{content:[{required:!0,message:"请输入名称",trigger:"blur"}]},tableData:[{area:"",ghost:0}]}},methods:{testCallBack:function(){console.log(this.tableData)},updateArea:function(){var e=this.areaData,t=this.selectedArea;t=t.join(","),this.tableData[0].area=t;var a=this.selectedArea,i=[],r=function(t){e.map((function(e){return e.id==a[t]?i.push(e.name):""}))};for(var o in a)r(o);var s=this,n=i.join(",");s.tableData=[],s.tableData.push({area:t,areaName:n}),s.specEditVisible=!1},onSaveTemplate:function(){var e=this;this.$refs["infoForm"].validate((function(t){if(!t)return!1;var a=e.tableData[0];if(""==a.area)return e.$message({type:"error",message:"地区不能为空"}),!1;var i=e;e.axios.post("shipper/saveExceptArea",{table:i.tableData,info:i.infoForm}).then((function(t){0===t.data.errno?(e.$message({type:"success",message:"保存成功"}),i.getInfo()):e.$message({type:"error",message:"保存失败"})}))}))},onAddTemplate:function(){var e=this;console.log("哈哈哈"),this.$refs["infoForm"].validate((function(t){if(!t)return!1;var a=e.tableData[0];if(""==a.area)return e.$message({type:"error",message:"地区不能为空"}),!1;var i=e;e.axios.post("shipper/addExceptArea",{table:i.tableData,info:i.infoForm}).then((function(t){0===t.data.errno?(e.$message({type:"success",message:"添加成功"}),e.$router.go(-1)):e.$message({type:"error",message:"添加失败"})}))}))},test:function(){console.log(this.defaultData)},goBackPage:function(){this.$router.go(-1)},getAllAreaData:function(){var e=this;this.axios.post("shipper/getareadata").then((function(t){0===t.data.errno&&(e.areaData=t.data.data)}))},handleRowEdit:function(e,t){var a=this.tableData[0].area;this.selectedArea=a.split(",").map(Number);var i=a;i=i.split(",");this.areaData;this.specEditVisible=!0},getInfo:function(){if(this.infoForm.id<=0)return!1;var e=this;this.axios.post("shipper/exceptAreaDetail",{id:e.infoForm.id}).then((function(t){var a=t.data.data;e.infoForm=a,e.tableData=[{area:a.area,areaName:a.areaName}]}))}},components:{},mounted:function(){this.infoForm.id=this.$route.query.id||0,this.getInfo(),this.getAllAreaData()}}),s=o,n=(a("b807"),a("0c7c")),l=Object(n["a"])(s,i,r,!1,null,"49919f57",null);t["default"]=l.exports},b807:function(e,t,a){"use strict";a("f835")},f835:function(e,t,a){}}]);