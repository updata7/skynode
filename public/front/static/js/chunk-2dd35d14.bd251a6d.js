(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2dd35d14"],{"0580":function(t,e,o){},"09f4":function(t,e,o){"use strict";o.d(e,"a",(function(){return r})),Math.easeInOutQuad=function(t,e,o,n){return t/=n/2,t<1?o/2*t*t+e:(t--,-o/2*(t*(t-2)-1)+e)};var n=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();function a(t){document.documentElement.scrollTop=t,document.body.parentNode.scrollTop=t,document.body.scrollTop=t}function s(){return document.documentElement.scrollTop||document.body.parentNode.scrollTop||document.body.scrollTop}function r(t,e,o){var r=s(),i=t-r,l=20,c=0;e="undefined"===typeof e?500:e;var u=function t(){c+=l;var s=Math.easeInOutQuad(c,r,i,e);a(s),c<e?n(t):o&&"function"===typeof o&&o()};u()}},"13aa":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[o("router-link",{attrs:{to:{path:"/goods/goods/addEdit",query:{}}}},[o("el-button",{attrs:{type:"primary",icon:"plus"}},[t._v("添加商品")])],1),o("div",{staticClass:"content-main"},[o("div",{staticClass:"block"},[o("span",{staticClass:"wrapper"},[o("el-button",{class:"actual_sales"==t.filterForm.sortField?"active":"",attrs:{plain:!0,type:"primary",size:"small"},on:{click:function(e){return t.sortOrder("actual_sales")}}},[t._v("按销量排序")]),o("el-button",{class:"stock"==t.filterForm.sortField?"active":"",attrs:{plain:!0,type:"primary",size:"small"},on:{click:function(e){return t.sortOrder("stock")}}},[t._v("按库存排序")])],1)]),o("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.filterForm.listType,callback:function(e){t.$set(t.filterForm,"listType",e)},expression:"filterForm.listType"}},[o("el-tab-pane",{attrs:{label:"全部商品",name:"all"}}),o("el-tab-pane",{attrs:{label:"出售中",name:"saling"}}),o("el-tab-pane",{attrs:{label:"已售完",name:"sold"}}),o("el-tab-pane",{attrs:{label:"已下架",name:"under"}})],1),o("div",{staticClass:"filter-box"},[o("el-form",{staticClass:"form-inline",attrs:{inline:!0}},[o("el-form-item",{attrs:{label:"商品名称"}},[o("el-input",{attrs:{size:"small",placeholder:"商品名称"},model:{value:t.filterForm.name,callback:function(e){t.$set(t.filterForm,"name",e)},expression:"filterForm.name"}})],1),o("el-form-item",[o("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.onSubmitFilter}},[t._v("查询")]),o("el-button",{attrs:{size:"small"},on:{click:t.clear}},[t._v("清空")])],1)],1)],1),o("div",{staticClass:"form-table-box"},[o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,stripe:""}},[o("el-table-column",{attrs:{type:"expand"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.row.products,stripe:""}},[o("el-table-column",{attrs:{prop:"sku",label:"商品SKU",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{size:"mini",placeholder:"商品SKU"},on:{blur:function(o){return t.checkSkuOnly(e.$index,e.row)}},model:{value:e.row.sku,callback:function(o){t.$set(e.row,"sku",o)},expression:"scope.row.sku"}})]}}],null,!0)}),o("el-table-column",{attrs:{prop:"short_name",label:"快递单上的简称",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{size:"mini",placeholder:"简称"},model:{value:e.row.short_name,callback:function(o){t.$set(e.row,"short_name",o)},expression:"scope.row.short_name"}})]}}],null,!0)}),o("el-table-column",{attrs:{prop:"attr",label:"型号/规格",width:"140"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{size:"mini",placeholder:"如1斤/条"},model:{value:e.row.attr,callback:function(o){t.$set(e.row,"attr",o)},expression:"scope.row.attr"}})]}}],null,!0)}),o("el-table-column",{attrs:{prop:"cost",label:"成本(元)",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{size:"mini",placeholder:"成本"},model:{value:e.row.cost,callback:function(o){t.$set(e.row,"cost",o)},expression:"scope.row.cost"}})]}}],null,!0)}),o("el-table-column",{attrs:{prop:"retail",label:"零售(元)",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{size:"mini",placeholder:"零售"},model:{value:e.row.retail,callback:function(o){t.$set(e.row,"retail",o)},expression:"scope.row.retail"}})]}}],null,!0)}),o("el-table-column",{attrs:{prop:"weight",label:"重量(KG)",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{size:"mini",placeholder:"重量"},model:{value:e.row.weight,callback:function(o){t.$set(e.row,"weight",o)},expression:"scope.row.weight"}})]}}],null,!0)}),o("el-table-column",{attrs:{prop:"stock",label:"库存",width:"90"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{size:"mini",placeholder:"库存"},model:{value:e.row.stock,callback:function(o){t.$set(e.row,"stock",o)},expression:"scope.row.stock"}})]}}],null,!0)}),o("el-table-column",{attrs:{label:"上架",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-switch",{attrs:{"active-text":"","inactive-text":"","active-value":1,"inactive-value":0},on:{change:function(o){return t.updateGoodsProduct({id:e.row.id,on_sale:e.row.on_sale})}},model:{value:e.row.on_sale,callback:function(o){t.$set(e.row,"on_sale",o)},expression:"scope.row.on_sale"}})]}}],null,!0)}),o("el-table-column",{attrs:{label:"操作",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(o){return t.specSave(e.$index,e.row)}}},[t._v(" 保存 ")]),o("el-button",{attrs:{size:"small",plain:"",type:"danger"},on:{click:function(o){return t.handleProductDelete(e.$index,e.row)}}},[t._v("删除")])]}}],null,!0)})],1)]}}])}),o("el-table-column",{attrs:{prop:"id",label:"ID",width:"120"}}),o("el-table-column",{attrs:{prop:"pic_url",label:"商品图片",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("img",{staticStyle:{width:"40px",height:"40px"},attrs:{src:t.getCompleteUrl(e.row.pic_url),alt:""}})]}}])}),o("el-table-column",{attrs:{prop:"name",label:"商品名称"}}),o("el-table-column",{attrs:{prop:"sort",label:"排序",width:"120",sortable:""},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input-number",{staticClass:"sort-width",attrs:{size:"mini",min:1,max:100,"controls-position":"right",placeholder:"排序"},on:{blur:function(o){return t.submitSort(e.$index,e.row)},change:function(o){return t.submitSort(e.$index,e.row)}},model:{value:e.row.sort,callback:function(o){t.$set(e.row,"sort",o)},expression:"scope.row.sort"}})]}}])}),o("el-table-column",{attrs:{prop:"sales",label:"显示销量",width:"120",sortable:""}}),o("el-table-column",{attrs:{prop:"actual_sales",label:"实际销量",width:"100",sortable:""}}),o("el-table-column",{attrs:{prop:"stock",label:"库存",width:"80",sortable:""}}),o("el-table-column",{attrs:{label:"首页显示",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-switch",{attrs:{"active-text":"","inactive-text":"","active-value":!0,"inactive-value":!1},on:{change:function(o){return t.updateGoods({id:e.row.id,is_index:e.row.is_index})}},model:{value:e.row.is_index,callback:function(o){t.$set(e.row,"is_index",o)},expression:"scope.row.is_index"}})]}}])}),o("el-table-column",{attrs:{label:"上架",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-switch",{attrs:{"active-text":"","inactive-text":"","active-value":1,"inactive-value":0},on:{change:function(o){return t.updateGoods({id:e.row.id,on_sale:e.row.on_sale})}},model:{value:e.row.on_sale,callback:function(o){t.$set(e.row,"on_sale",o)},expression:"scope.row.on_sale"}})]}}])}),o("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"small"},on:{click:function(o){return t.handleRowEdit(e.$index,e.row)}}},[t._v("编辑")]),o("el-button",{attrs:{size:"small",plain:"",type:"danger"},on:{click:function(o){return t.handleRowDelete(e.$index,e.row)}}},[t._v("删除")])]}}])})],1)],1),o("pagination",{directives:[{name:"show",rawName:"v-show",value:t.total>0,expression:"total>0"}],attrs:{total:t.total,page:t.filterForm.pageNo,limit:t.filterForm.pageSize},on:{"update:page":function(e){return t.$set(t.filterForm,"pageNo",e)},"update:limit":function(e){return t.$set(t.filterForm,"pageSize",e)},pagination:t.getList}})],1)],1)},a=[];o("a4d3"),o("b64b");function s(t,e){if(null==t)return{};var o,n,a={},s=Object.keys(t);for(n=0;n<s.length;n++)o=s[n],e.indexOf(o)>=0||(a[o]=t[o]);return a}function r(t,e){if(null==t)return{};var o,n,a=s(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(n=0;n<r.length;n++)o=r[n],e.indexOf(o)>=0||Object.prototype.propertyIsEnumerable.call(t,o)&&(a[o]=t[o])}return a}o("4e82");var i=o("333d"),l=o("ed08"),c=o("c40e"),u=o("abd4"),d=o("365c"),p=["createTime","updateTime","belong_user_id","goods_id"],m={components:{Pagination:i["a"]},data:function(){return{total:0,filterForm:{pageNo:1,pageSize:l["a"],listType:"all",sortField:"createTime"},pIndex:0,num:0,activeClass:0,expand:!0,tableData:[{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1517 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1519 弄"},{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1516 弄"}]}},methods:{getCompleteUrl:function(t){return Object(d["a"])(t)},updateGoods:function(t){var e=this;Object(c["d"])(t).then((function(t){t.data.success?e.$message({type:"success",message:"操作成功"}):e.$message({type:"fail",message:t.data.message}),e.getList()}))},specSave:function(t,e){var o=this;if(""==e.goods_name||""==e.value||""==e.cost||""==e.retail_price||""==e.goods_weight)return this.$message({type:"error",message:"值不能为空!"}),!1;e.createTime,e.updateTime,e.belong_user_id,e.goods_id;var n=r(e,p);Object(u["c"])(n).then((function(t){t.data.success?o.$message({type:"success",message:"修改成功!"}):o.$message({type:"error",message:t.data.message}),o.getList()}))},checkSkuOnly:function(t,e){var o=this;if(console.log(t),console.log(e),""==e.goods_sn)return this.$message({type:"error",message:"SKU不能为空"}),!1;this.axios.post("goods/checkSku",{info:e}).then((function(t){100===t.data.errno?o.$message({type:"error",message:"该SKU已存在！"}):o.$message({type:"success",message:"该SKU可以用！"})}))},expandToggle:function(){this.expand=!this.expand},submitName:function(t,e){var o=this;this.axios.post("goods/updateShortName",{id:e.id,short_name:e.short_name}).then((function(t){0===t.data.errno&&o.$message({type:"success",message:"修改成功!"})}))},submitSort:function(t,e){this.updateGoods({id:e.id,sort:e.sort})},handleClick:function(){this.filterForm.pageNo=1,this.filterForm.sortField="createTime",this.getList()},handleRowEdit:function(t,e){this.$router.push({path:"/goods/goods/addEdit",query:e})},handleRowDelete:function(t,e){var o=this;this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=o;Object(c["b"])({ids:[e.id]}).then((function(e){e.data.success?t.$message({type:"success",message:"删除成功!"}):t.$message({type:"fail",message:e.data.message}),t.getList()}))}))},handleProductDelete:function(t,e){var o=this;this.$confirm("确定要删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var t=o;Object(u["b"])({ids:[e.id]}).then((function(e){e.data.success?t.$message({type:"success",message:"删除成功!"}):t.$message({type:"fail",message:e.data.message}),t.getList()}))}))},onSubmitFilter:function(){this.filterForm.pageNo=1,this.getList()},clear:function(){this.filterForm={pageNo:1,pageSize:l["a"]},this.getList()},getList:function(){var t=this;Object(c["c"])(this.filterForm).then((function(e){t.tableData=e.data.data,t.total=e.data.total}))},sortOrder:function(t){this.filterForm.sortField=t,this.getList()},changeStatus:function(t,e){this.axios.get("goods/saleStatus",{params:{status:t,id:e}}).then((function(t){}))},changeProductStatus:function(t,e){this.axios.get("goods/productStatus",{params:{status:t,id:e}}).then((function(t){}))},changeShowStatus:function(t,e){this.axios.get("goods/indexShowStatus",{params:{status:t,id:e}}).then((function(t){}))}},mounted:function(){this.getList()}},f=m,h=(o("9c03"),o("0c7c")),b=Object(h["a"])(f,n,a,!1,null,"2f7325a0",null);e["default"]=b.exports},"365c":function(t,e,o){"use strict";o.d(e,"b",(function(){return n})),o.d(e,"a",(function(){return s}));var n="http://120.24.170.189:9011/api/multiMedia/upload",a="http://120.24.170.189:9011";function s(t){return a+"/"+t}},"4e82":function(t,e,o){"use strict";var n=o("23e7"),a=o("1c0b"),s=o("7b0b"),r=o("d039"),i=o("a640"),l=[],c=l.sort,u=r((function(){l.sort(void 0)})),d=r((function(){l.sort(null)})),p=i("sort"),m=u||!d||!p;n({target:"Array",proto:!0,forced:m},{sort:function(t){return void 0===t?c.call(s(this)):c.call(s(this),a(t))}})},"9c03":function(t,e,o){"use strict";o("0580")},abd4:function(t,e,o){"use strict";o.d(e,"a",(function(){return a})),o.d(e,"b",(function(){return s})),o.d(e,"c",(function(){return r}));var n=o("b775");function a(t){return Object(n["a"])({url:"/goodsProduct/check",method:"post",data:t})}function s(t){return Object(n["a"])({url:"/goodsProduct/delete",method:"put",data:t})}function r(t){return Object(n["a"])({url:"/goodsProduct/update",method:"post",data:t})}},c40e:function(t,e,o){"use strict";o.d(e,"c",(function(){return a})),o.d(e,"a",(function(){return s})),o.d(e,"d",(function(){return r})),o.d(e,"b",(function(){return i}));var n=o("b775");function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/goods/list",method:"get",params:t})}function s(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/goods/create",method:"post",data:t})}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/goods/update",method:"post",data:t})}function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(n["a"])({url:"/goods/delete",method:"put",data:t})}}}]);